{"mappings":"oeAAAA,EAAA,S,sHAWA,EAAAC,EAAAC,oBAAmBC,EAAAC,MAAMC,IAClBA,GAGH,EAAAC,EAAAC,cACGC,MAAKC,IAEJ,GADAC,EAAAC,KAAKC,aAAaC,YAAc,wBAC3BJ,EAAU,CACb,MAAMK,EAAS,wFAIf,YAHAC,SACGC,cAAc,sBACdC,mBAAmB,YAAaH,EAErC,CACA,MAAMI,EAAQ,GAEdC,OAAOC,QAAQX,GAAUY,SAAQ,EAAEC,EAAKC,MAEtCL,EAAMM,KAAKD,EAAA,IAEb,MAAME,EAAe,GACfC,EAAWR,EAAMS,KAAIC,IAAQ,EAAAC,EAAAC,qBAAoBF,KACvDG,QAAQC,IAAIN,GAAUlB,MAAKyB,IACzB,IAAK,MAAMC,YAAEA,KAAiBD,EAC5BR,EAAaD,KAAKU,EAAY,IAEhC,GAAIC,OAAOC,SAASC,KAAKC,SAAS,aAAc,CAC9CC,EAAAC,WAAWC,KAAKC,iBAAiB,UACjC,SAA0BC,GACxBA,EAAEC,iBACF,IAAIC,EAAcF,EAAEG,cAAcC,SAAS,GAAGxB,MAC3CyB,OACAC,cACH,MAAMC,EAAiB,GACvBX,EAAAC,WAAWC,KAAKU,QAChB1B,EAAaJ,SAAQ+B,IACfA,EAAOC,cAAcJ,cAAcX,SAASO,IAC9CK,EAAe1B,KAAK4B,EAAA,KAGxB,EAAAE,EAAAC,MAAKL,EACP,GACF,EACA,EAAAI,EAAAC,MAAK9B,EAAA,GACP,IAED+B,OAAMC,IACLC,QAAQC,IAAIF,EAAA,IA7ChBrB,SAASwB,QAAQ,iBA8Cf","sources":["src/js/favorite-i.js"],"sourcesContent":["import './modal-cocktail';\nimport './header';\nimport './header/mob-menu.js';\nimport { onAuthStateChanged } from '@firebase/auth';\nimport { auth } from './auth/api/auth';\nimport { refs } from './gallery/refs/refs';\nimport { getIngrids } from './auth/api';\nimport { getIngredientByName } from './modal-ingredient/api/api';\nimport { main } from './pagination';\nimport { refsSearch } from './header/refs/search';\n\nonAuthStateChanged(auth, user => {\n  if (!user) {\n    location.replace('/cocktail-bar/');\n  } else\n    getIngrids()\n      .then(response => {\n        refs.coctailTitel.textContent = 'Favorite ingredients';\n        if (!response) {\n          const markup = `<p class=\"no-added-message__text\">You haven't added any favorite ingredients yet</p>`;\n          document\n            .querySelector('.gallery.container')\n            .insertAdjacentHTML('beforeend', markup);\n          return;\n        }\n        const array = [];\n        //       //  Получаем массив масива\n        Object.entries(response).forEach(([key, value]) => {\n          //         //Добавить key from firebase\n          array.push(value);\n        });\n        const arrayIngrids = [];\n        const promises = array.map(name => getIngredientByName(name));\n        Promise.all(promises).then(data => {\n          for (const { ingredients } of data) {\n            arrayIngrids.push(ingredients[0]);\n          }\n          if (window.location.href.includes('favorites')) {\n            refsSearch.form.addEventListener('submit', onChangeFavInput);\n            function onChangeFavInput(e) {\n              e.preventDefault();\n              let searchQuery = e.currentTarget.elements[1].value\n                .trim()\n                .toLowerCase();\n              const arrayFavIngrid = [];\n              refsSearch.form.reset();\n              arrayIngrids.forEach(ingrid => {\n                if (ingrid.strIngredient.toLowerCase().includes(searchQuery)) {\n                  arrayFavIngrid.push(ingrid);\n                }\n              });\n              main(arrayFavIngrid);\n            }\n          }\n          main(arrayIngrids);\n        });\n      })\n      .catch(error => {\n        console.log(error);\n      });\n});\n"],"names":["parcelRequire","$1iO0g","onAuthStateChanged","$fy93h","auth","user","$fvTqB","getIngrids","then","response","$1lZvt","refs","coctailTitel","textContent","markup","document","querySelector","insertAdjacentHTML","array","Object","entries","forEach","key","value","push","arrayIngrids","promises","map","name","$bE4bs","getIngredientByName","Promise","all","data","ingredients","window","location","href","includes","$29EdN","refsSearch","form","addEventListener","e","preventDefault","searchQuery","currentTarget","elements","trim","toLowerCase","arrayFavIngrid","reset","ingrid","strIngredient","$2nhTy","main","catch","error","console","log","replace"],"version":3,"file":"favorites-i.6fabbaa6.js.map"}