{"mappings":"gfACAA,EAAA,S,sHAaA,EAAAC,EAAAC,oBAAmBC,EAAAC,MAAMC,IAClBA,GAGH,EAAAC,EAAAC,cACGC,MAAKC,IAGJ,GAFAC,QAAQC,IAAI,WAAYF,GACxBG,EAAAC,KAAKC,aAAaC,YAAc,wBAC3BN,EAAU,CACb,MAAMO,EAAS,wFAIf,YAHAC,SACGC,cAAc,sBACdC,mBAAmB,YAAaH,EAErC,CACA,MAAMI,EAAQ,GAEdC,OAAOC,QAAQb,GAAUc,SAAQ,EAAEC,EAAKC,MAEtCL,EAAMM,KAAKD,GACXf,QAAQC,IAAIS,EAAA,IAEd,MAAMO,EAAe,GACfC,EAAWR,EAAMS,KAAIC,IAAQ,EAAAC,EAAAC,qBAAoBF,KAEvDG,QAAQC,IAAIN,GAAUpB,MAAK2B,IACzBzB,QAAQC,IAAIwB,GACZ,IAAK,MAAMC,YAAEA,KAAiBD,EAC5BR,EAAaD,KAAKU,EAAY,IAEhC,GAAIC,OAAOC,SAASC,KAAKC,SAAS,aAAc,CAC9CC,EAAAC,WAAWC,KAAKC,iBAAiB,UACjC,SAA0BC,GACxBA,EAAEC,iBACF,IAAIC,EAAcF,EAAEG,cAAcC,SAAS,GAAGxB,MAC3CyB,OACAC,cACH,MAAMC,EAAiB,GACvBX,EAAAC,WAAWC,KAAKU,QAChB1B,EAAaJ,SAAQ+B,IACfA,EAAOC,cAAcJ,cAAcX,SAASO,IAC9CK,EAAe1B,KAAK4B,EAAA,KAGxB,EAAAE,EAAAC,MAAKL,EACP,GACF,CACA1C,QAAQC,IAAIgB,IACZ,EAAA6B,EAAAC,MAAK9B,EAAA,GACP,IAED+B,OAAMC,IACLjD,QAAQC,IAAIgD,EAAA,IAlDhBrB,SAASsB,QAAQ,iBAmDf,G","sources":["src/js/favorite-i.js"],"sourcesContent":["// import './gallery';\nimport './modal-cocktail';\n// import './modal-ingredient';\nimport './header';\nimport './header/mob-menu.js';\nimport { onAuthStateChanged } from '@firebase/auth';\nimport { auth } from './auth/api/auth';\n// import { main } from './pagination';\nimport { refs } from './gallery/refs/refs';\nimport { getIngrids } from './auth/api';\nimport { getIngredientByName } from './modal-ingredient/api/api';\nimport { main } from './pagination';\nimport { refsSearch } from './header/refs/search';\n\nonAuthStateChanged(auth, user => {\n  if (!user) {\n    location.replace('/cocktail-bar/');\n  } else\n    getIngrids()\n      .then(response => {\n        console.log('response', response);\n        refs.coctailTitel.textContent = 'Favorite ingredients';\n        if (!response) {\n          const markup = `<p class=\"no-added-message__text\">You haven't added any favorite ingredients yet</p>`;\n          document\n            .querySelector('.gallery.container')\n            .insertAdjacentHTML('beforeend', markup);\n          return;\n        }\n        const array = [];\n        //       //  Получаем массив масива\n        Object.entries(response).forEach(([key, value]) => {\n          //         //Добавить key from firebase\n          array.push(value);\n          console.log(array);\n        });\n        const arrayIngrids = [];\n        const promises = array.map(name => getIngredientByName(name));\n        // console.log(promises);\n        Promise.all(promises).then(data => {\n          console.log(data);\n          for (const { ingredients } of data) {\n            arrayIngrids.push(ingredients[0]);\n          }\n          if (window.location.href.includes('favorites')) {\n            refsSearch.form.addEventListener('submit', onChangeFavInput);\n            function onChangeFavInput(e) {\n              e.preventDefault();\n              let searchQuery = e.currentTarget.elements[1].value\n                .trim()\n                .toLowerCase();\n              const arrayFavIngrid = [];\n              refsSearch.form.reset();\n              arrayIngrids.forEach(ingrid => {\n                if (ingrid.strIngredient.toLowerCase().includes(searchQuery)) {\n                  arrayFavIngrid.push(ingrid);\n                }\n              });\n              main(arrayFavIngrid);\n            }\n          }\n          console.log(arrayIngrids);\n          main(arrayIngrids);\n        });\n      })\n      .catch(error => {\n        console.log(error);\n      });\n});\n"],"names":["parcelRequire","$eMcUM","onAuthStateChanged","$dWbaE","auth","user","$gaAvG","getIngrids","then","response","console","log","$lIxsd","refs","coctailTitel","textContent","markup","document","querySelector","insertAdjacentHTML","array","Object","entries","forEach","key","value","push","arrayIngrids","promises","map","name","$lJ0Sd","getIngredientByName","Promise","all","data","ingredients","window","location","href","includes","$jPJgY","refsSearch","form","addEventListener","e","preventDefault","searchQuery","currentTarget","elements","trim","toLowerCase","arrayFavIngrid","reset","ingrid","strIngredient","$jcFG7","main","catch","error","replace"],"version":3,"file":"favorites-i.acf9db9f.js.map"}